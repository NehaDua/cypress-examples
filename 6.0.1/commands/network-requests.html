<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Network Requests | Cypress examples (v6.0.1)</title>
    <meta name="description" content="Static site with Cypress examples tested right from the Markdown sources">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <style>.action-focus.focus { border: 5px solid orange; } .hidden { display: none !important; }</style>
  <script src="https://code.jquery.com/jquery-3.5.0.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    
    <link rel="preload" href="/cypress-examples/6.0.1/assets/css/0.styles.e7124911.css" as="style"><link rel="preload" href="/cypress-examples/6.0.1/assets/js/app.ea0a8005.js" as="script"><link rel="preload" href="/cypress-examples/6.0.1/assets/js/3.25f6344f.js" as="script"><link rel="preload" href="/cypress-examples/6.0.1/assets/js/16.5bf2cf39.js" as="script"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/10.695d4eab.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/11.4510c13b.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/12.b02de730.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/13.dda70230.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/14.a8bfb137.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/15.df523044.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/17.08d39281.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/18.8c847ece.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/19.95dbad43.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/20.4951cf69.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/21.58a746da.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/22.8c4155f9.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/23.44b5bd96.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/24.ff1fb0da.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/25.ed2ca52f.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/26.e4d39c01.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/4.2325281c.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/5.3e7b1f9c.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/6.a3e8d15d.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/7.34c95fd2.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/8.ef8db269.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/9.ad5b5979.js"><link rel="prefetch" href="/cypress-examples/6.0.1/assets/js/vendors~docsearch.ef7fd654.js">
    <link rel="stylesheet" href="/cypress-examples/6.0.1/assets/css/0.styles.e7124911.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cypress-examples/6.0.1/" class="home-link router-link-active"><!----> <span class="site-name">Cypress examples (v6.0.1)</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Commands" class="dropdown-title"><span class="title">Commands</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/querying/" class="nav-link">
  Querying
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/traversal/" class="nav-link">
  Traversal
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/actions/" class="nav-link">
  Actions
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/window/" class="nav-link">
  Window
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/viewport/" class="nav-link">
  Viewport
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/location/" class="nav-link">
  Location
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/navigation/" class="nav-link">
  Navigation
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/assertions/" class="nav-link">
  Assertions
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/misc/" class="nav-link">
  Misc
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/connectors/" class="nav-link">
  Connectors
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/aliasing/" class="nav-link">
  Aliasing
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/waiting/" class="nav-link">
  Waiting
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/network-requests/" class="nav-link">
  Network Requests
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/files/" class="nav-link">
  Files
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/local-storage/" class="nav-link">
  Local Storage
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/cookies/" class="nav-link">
  Cookies
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/spies-stubs-clocks/" class="nav-link">
  Spies, Stubs &amp; Clocks
</a></li></ul></div></div><div class="nav-item"><a href="/cypress-examples/6.0.1/utilities/" class="nav-link">
  Utilities
</a></div><div class="nav-item"><a href="/cypress-examples/6.0.1/cypress-api/" class="nav-link">
  Cypress API
</a></div> <a href="https://github.com/bahmutov/cypress-examples" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Commands" class="dropdown-title"><span class="title">Commands</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/querying/" class="nav-link">
  Querying
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/traversal/" class="nav-link">
  Traversal
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/actions/" class="nav-link">
  Actions
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/window/" class="nav-link">
  Window
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/viewport/" class="nav-link">
  Viewport
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/location/" class="nav-link">
  Location
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/navigation/" class="nav-link">
  Navigation
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/assertions/" class="nav-link">
  Assertions
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/misc/" class="nav-link">
  Misc
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/connectors/" class="nav-link">
  Connectors
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/aliasing/" class="nav-link">
  Aliasing
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/waiting/" class="nav-link">
  Waiting
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/network-requests/" class="nav-link">
  Network Requests
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/files/" class="nav-link">
  Files
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/local-storage/" class="nav-link">
  Local Storage
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/cookies/" class="nav-link">
  Cookies
</a></li><li class="dropdown-item"><!----> <a href="/cypress-examples/6.0.1/commands/spies-stubs-clocks/" class="nav-link">
  Spies, Stubs &amp; Clocks
</a></li></ul></div></div><div class="nav-item"><a href="/cypress-examples/6.0.1/utilities/" class="nav-link">
  Utilities
</a></div><div class="nav-item"><a href="/cypress-examples/6.0.1/cypress-api/" class="nav-link">
  Cypress API
</a></div> <a href="https://github.com/bahmutov/cypress-examples" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Network Requests</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cypress-examples/6.0.1/commands/network-requests.html#cy-server" class="sidebar-link">cy.server()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cypress-examples/6.0.1/commands/network-requests.html#cy-request" class="sidebar-link">cy.request()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cypress-examples/6.0.1/commands/network-requests.html#cy-route" class="sidebar-link">cy.route()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/cypress-examples/6.0.1/commands/network-requests.html#cy-intercept" class="sidebar-link">cy.intercept()</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="network-requests"><a href="#network-requests" class="header-anchor">#</a> Network Requests</h1> <p>Examples of handling AJAX or XHR requests in Cypress, for a full reference of commands, go to <a href="https://on.cypress.io/api" target="_blank" rel="noopener noreferrer">docs.cypress.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="cy-server"><a href="#cy-server" class="header-anchor">#</a> <a href="https://on.cypress.io/server" target="_blank" rel="noopener noreferrer">cy.server()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p><em>Deprecated</em> in Cypress v6</p> <p>To control the behavior of network requests and responses, use the <code>cy.server()</code> command.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// https://on.cypress.io/server</span>

cy<span class="token punctuation">.</span><span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">server</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// the default options on server</span>
  <span class="token comment">// you can override any of these options</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">an</span><span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>method<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>null
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>null
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>onRequest<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>undefined
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>onResponse<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>undefined
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>onAbort<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span>undefined

  <span class="token comment">// These options control the server behavior</span>
  <span class="token comment">// affecting all requests</span>

  <span class="token comment">// pass false to disable existing route stubs</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>enable<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">true</span>
  <span class="token comment">// forces requests that don't match your routes to 404</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>force404<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">false</span>
  <span class="token comment">// preserve requests from ever being logged or stubbed</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>ignore<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'function'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

cy<span class="token punctuation">.</span><span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
  delay<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  status<span class="token operator">:</span> <span class="token number">422</span><span class="token punctuation">,</span>
  response<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// any route commands will now inherit the above options</span>
<span class="token comment">// from the server. anything we pass specifically</span>
<span class="token comment">// to route will override the defaults though.</span>
</code></pre></div> <h2 id="cy-request"><a href="#cy-request" class="header-anchor">#</a> <a href="https://on.cypress.io/request" target="_blank" rel="noopener noreferrer">cy.request()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>To make an XHR request, use the <code>cy.request()</code> command.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// https://on.cypress.io/request</span>
cy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.cypress.io/comments'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
    <span class="token comment">// the server sometimes gets an extra comment posted from another machine</span>
    <span class="token comment">// which gets returned as 1 extra object</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
      <span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'length'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>and<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">oneOf</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">501</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'headers'</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'duration'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// will execute request</span>
<span class="token comment">// https://jsonplaceholder.cypress.io/comments?postId=1&amp;id=3</span>
cy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token operator">:</span> <span class="token string">'https://jsonplaceholder.cypress.io/comments'</span><span class="token punctuation">,</span>
  qs<span class="token operator">:</span> <span class="token punctuation">{</span>
    postId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'be.an'</span><span class="token punctuation">,</span> <span class="token string">'array'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token string">'have.length'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token comment">// yields first element of the array</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'contain'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    postId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <p>A request can pass the response data to the next request.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// first, let's find out the userId of the first user we have</span>
cy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.cypress.io/users?_limit=1'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span> <span class="token comment">// yields the response object</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token comment">// yields the first element of the returned list</span>
  <span class="token comment">// the above two commands its('body').its('0')</span>
  <span class="token comment">// can be written as its('body.0')</span>
  <span class="token comment">// if you do not care about TypeScript checks</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span>
    <span class="token comment">// make a new post on behalf of the user</span>
    cy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'https://jsonplaceholder.cypress.io/posts'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      userId<span class="token operator">:</span> user<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
      title<span class="token operator">:</span> <span class="token string">'Cypress Test Runner'</span><span class="token punctuation">,</span>
      body<span class="token operator">:</span>
        <span class="token string">'Fast, easy and reliable testing for anything that runs in a browser.'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// note that the value here is the returned value of the 2nd request</span>
  <span class="token comment">// which is the new post object</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'status'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">201</span><span class="token punctuation">)</span> <span class="token comment">// new entity created</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">contain</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">'Cypress Test Runner'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// we don't know the exact post id - only that it will be &gt; 100</span>
    <span class="token comment">// since JSONPlaceholder has built-in 100 posts</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>and<span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token comment">// we don't know the user id here - since it was in above closure</span>
    <span class="token comment">// so in this test just confirm that the property is there</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'userId'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <p>A good idea is to save the response data to be used later in the shared test context.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// https://on.cypress.io/variables-and-aliases</span>
cy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'https://jsonplaceholder.cypress.io/users?_limit=1'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token comment">// yields the first element of the returned list</span>
  <span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span> <span class="token comment">// saves the object in the test context</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// NOTE 👀</span>
    <span class="token comment">//  By the time this callback runs the &quot;as('user')&quot; command</span>
    <span class="token comment">//  has saved the user object in the test context.</span>
    <span class="token comment">//  To access the test context we need to use</span>
    <span class="token comment">//  the &quot;function () { ... }&quot; callback form,</span>
    <span class="token comment">//  otherwise &quot;this&quot; points at a wrong or undefined object!</span>
    cy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'https://jsonplaceholder.cypress.io/posts'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      userId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
      title<span class="token operator">:</span> <span class="token string">'Cypress Test Runner'</span><span class="token punctuation">,</span>
      body<span class="token operator">:</span>
        <span class="token string">'Fast, easy and reliable testing for anything that runs in a browser.'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'post'</span><span class="token punctuation">)</span> <span class="token comment">// save the new post from the response</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// When this callback runs, both &quot;cy.request&quot; API commands have finished</span>
    <span class="token comment">// and the test context has &quot;user&quot; and &quot;post&quot; objects set.</span>
    <span class="token comment">// Let's verify them.</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>post<span class="token punctuation">,</span> <span class="token string">'post has the right user id'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'userId'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div> <h2 id="cy-route"><a href="#cy-route" class="header-anchor">#</a> <a href="https://on.cypress.io/route" target="_blank" rel="noopener noreferrer">cy.route()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p><em>Deprecated</em> in Cypress v6</p> <p>To route responses to matching requests, use the <code>cy.route()</code> command.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-route-btn btn btn-primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Get Comment<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-route-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-route-post btn btn-success<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Post Comment
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-route-post-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-route-put btn btn-warning<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Update Comment
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-route-put-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// place the example code into a closure to isolate its variables</span>
  <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// we fetch all data from this REST json backend</span>
    <span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token string">'https://jsonplaceholder.cypress.io'</span>

    <span class="token keyword">function</span> <span class="token function">getComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-route-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">postComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'Using POST in cy.route()'</span><span class="token punctuation">,</span>
          email<span class="token operator">:</span> <span class="token string">'hello@cypress.io'</span><span class="token punctuation">,</span>
          body<span class="token operator">:</span>
            <span class="token string">'You can change the method used for cy.route() to be GET, POST, PUT, PATCH, or DELETE'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-route-post-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'POST successful!'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">putComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'PUT'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'Using PUT in cy.route()'</span><span class="token punctuation">,</span>
          email<span class="token operator">:</span> <span class="token string">'hello@cypress.io'</span><span class="token punctuation">,</span>
          body<span class="token operator">:</span>
            <span class="token string">'You can change the method used for cy.route() to be GET, POST, PUT, PATCH, or DELETE'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        statusCode<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token number">404</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-route-put-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>
              data<span class="token punctuation">.</span>responseJSON<span class="token punctuation">.</span>error<span class="token punctuation">,</span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-route-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">getComment</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-route-post'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">postComment</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-route-put'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">putComment</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><button class="network-route-btn btn btn-primary">Get Comment</button> <div class="network-route-comment"></div> <button class="network-route-post btn btn-success">
  Post Comment
</button> <div class="network-route-post-comment"></div> <button class="network-route-put btn btn-warning">
  Update Comment
</button> <div class="network-route-put-comment"></div> <script>
  // place the example code into a closure to isolate its variables
  ;(function () {
    // we fetch all data from this REST json backend
    const root = 'https://jsonplaceholder.cypress.io'

    function getComment() {
      $.ajax({
        url: `${root}/comments/1`,
        method: 'GET',
      }).then(function (data) {
        $('.network-route-comment').text(data.body)
      })
    }

    function postComment() {
      $.ajax({
        url: `${root}/comments`,
        method: 'POST',
        data: {
          name: 'Using POST in cy.route()',
          email: 'hello@cypress.io',
          body:
            'You can change the method used for cy.route() to be GET, POST, PUT, PATCH, or DELETE',
        },
      }).then(function () {
        $('.network-route-post-comment').text('POST successful!')
      })
    }

    function putComment() {
      $.ajax({
        url: `${root}/comments/1`,
        method: 'PUT',
        data: {
          name: 'Using PUT in cy.route()',
          email: 'hello@cypress.io',
          body:
            'You can change the method used for cy.route() to be GET, POST, PUT, PATCH, or DELETE',
        },
        statusCode: {
          404(data) {
            $('.network-route-put-comment').text(
              data.responseJSON.error,
            )
          },
        },
      })
    }

    $('.network-route-btn').on('click', function (e) {
      e.preventDefault()
      getComment(e)
    })

    $('.network-route-post').on('click', function (e) {
      e.preventDefault()
      postComment(e)
    })

    $('.network-route-put').on('click', function (e) {
      e.preventDefault()
      putComment(e)
    })
  })()
</script></div></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// https://on.cypress.io/route</span>

<span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">'whoa, this comment does not exist'</span>

cy<span class="token punctuation">.</span><span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Listen to GET to comments/1</span>
cy<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'comments/*'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'getComment'</span><span class="token punctuation">)</span>

<span class="token comment">// we have code that gets a comment when</span>
<span class="token operator">/</span><span class="token operator">/</span> the button is clicked <span class="token keyword">in</span> scripts<span class="token punctuation">.</span>js
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-route-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>on<span class="token punctuation">.</span>cypress<span class="token punctuation">.</span>io<span class="token operator">/</span>wait
cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token string">'@getComment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'status'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'eq'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> Listen to <span class="token constant">POST</span> to comments
cy<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'/comments'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'postComment'</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> we have code that posts a comment when
<span class="token operator">/</span><span class="token operator">/</span> the button is clicked <span class="token keyword">in</span> scripts<span class="token punctuation">.</span>js
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-route-post'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token string">'@postComment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">xhr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>requestBody<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span><span class="token string">'email'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>requestHeaders<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseBody<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span>
    <span class="token string">'name'</span><span class="token punctuation">,</span>
    <span class="token string">'Using POST in cy.route()'</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> Stub a response to <span class="token constant">PUT</span> <span class="token string">&quot;comments/*&quot;</span>
cy<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token operator">:</span> <span class="token string">'PUT'</span><span class="token punctuation">,</span>
  url<span class="token operator">:</span> <span class="token string">'comments/*'</span><span class="token punctuation">,</span>
  status<span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">,</span>
  response<span class="token operator">:</span> <span class="token punctuation">{</span> error<span class="token operator">:</span> message <span class="token punctuation">}</span><span class="token punctuation">,</span>
  delay<span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'putComment'</span><span class="token punctuation">)</span>

<span class="token comment">// we have code that puts a comment when</span>
<span class="token operator">/</span><span class="token operator">/</span> the button is clicked <span class="token keyword">in</span> scripts<span class="token punctuation">.</span>js
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-route-put'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token string">'@putComment'</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> our <span class="token number">404</span> statusCode logic <span class="token keyword">in</span> scripts<span class="token punctuation">.</span>js executed
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-route-put-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'contain'</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>
</code></pre></div> <h2 id="cy-intercept"><a href="#cy-intercept" class="header-anchor">#</a> <a href="https://on.cypress.io/intercept" target="_blank" rel="noopener noreferrer">cy.intercept()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <p>To route responses to matching requests, use the <code>cy.intercept()</code> command.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-btn btn btn-primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Get Comment<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-post btn btn-success<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Post Comment<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-post-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-put btn btn-warning<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Update Comment<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-put-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-delete btn btn-warning<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Delete Comment<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>network-delete-comment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// place the example code into a closure to isolate its variables</span>
  <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// we fetch all data from this REST json backend</span>
    <span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token string">'https://jsonplaceholder.cypress.io'</span>

    <span class="token keyword">function</span> <span class="token function">getComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">postComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'Using POST in cy.intercept()'</span><span class="token punctuation">,</span>
          email<span class="token operator">:</span> <span class="token string">'hello@cypress.io'</span><span class="token punctuation">,</span>
          body<span class="token operator">:</span>
            <span class="token string">'You can change the method used for cy.intercept() to be GET, POST, PUT, PATCH, or DELETE'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-post-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'POST successful!'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">putComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'PUT'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'Using PUT in cy.route()'</span><span class="token punctuation">,</span>
          email<span class="token operator">:</span> <span class="token string">'hello@cypress.io'</span><span class="token punctuation">,</span>
          body<span class="token operator">:</span>
            <span class="token string">'You can change the method used for cy.route() to be GET, POST, PUT, PATCH, or DELETE'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        statusCode<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token number">404</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-put-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>responseJSON<span class="token punctuation">.</span>error<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">deleteComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/comments/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'DELETE'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-delete-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'Comment deleted!'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">getComment</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-post'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">postComment</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-put'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">putComment</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.network-delete'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">deleteComment</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="example"><button class="network-btn btn btn-primary">Get Comment</button> <div class="network-comment"></div> <button class="network-post btn btn-success">Post Comment</button> <div class="network-post-comment"></div> <button class="network-put btn btn-warning">Update Comment</button> <div class="network-put-comment"></div> <button class="network-delete btn btn-warning">Delete Comment</button> <div class="network-delete-comment"></div> <script>
  // place the example code into a closure to isolate its variables
  ;(function () {
    // we fetch all data from this REST json backend
    const root = 'https://jsonplaceholder.cypress.io'

    function getComment() {
      $.ajax({
        url: `${root}/comments/1`,
        method: 'GET',
      }).then(function (data) {
        $('.network-comment').text(data.body)
      })
    }

    function postComment() {
      $.ajax({
        url: `${root}/comments`,
        method: 'POST',
        data: {
          name: 'Using POST in cy.intercept()',
          email: 'hello@cypress.io',
          body:
            'You can change the method used for cy.intercept() to be GET, POST, PUT, PATCH, or DELETE',
        },
      }).then(function () {
        $('.network-post-comment').text('POST successful!')
      })
    }

    function putComment() {
      $.ajax({
        url: `${root}/comments/1`,
        method: 'PUT',
        data: {
          name: 'Using PUT in cy.route()',
          email: 'hello@cypress.io',
          body:
            'You can change the method used for cy.route() to be GET, POST, PUT, PATCH, or DELETE',
        },
        statusCode: {
          404(data) {
            $('.network-put-comment').text(data.responseJSON.error)
          },
        },
      })
    }

    function deleteComment() {
      $.ajax({
        url: `${root}/comments/1`,
        method: 'DELETE',
      }).then(function () {
        $('.network-delete-comment').text('Comment deleted!')
      })
    }

    $('.network-btn').on('click', function (e) {
      e.preventDefault()
      getComment(e)
    })

    $('.network-post').on('click', function (e) {
      e.preventDefault()
      postComment(e)
    })

    $('.network-put').on('click', function (e) {
      e.preventDefault()
      putComment(e)
    })

    $('.network-delete').on('click', function (e) {
      e.preventDefault()
      deleteComment(e)
    })
  })()
</script></div></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// https://on.cypress.io/intercept</span>

<span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">'whoa, this comment does not exist'</span>

<span class="token comment">// Listen to GET to comments/1</span>
cy<span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'**/comments/*'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'getComment'</span><span class="token punctuation">)</span>

<span class="token comment">// we have code that gets a comment when</span>
<span class="token operator">/</span><span class="token operator">/</span> the button is clicked <span class="token keyword">in</span> scripts<span class="token punctuation">.</span>js
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>on<span class="token punctuation">.</span>cypress<span class="token punctuation">.</span>io<span class="token operator">/</span>wait
cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token string">'@getComment'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">its</span><span class="token punctuation">(</span><span class="token string">'response.statusCode'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'be.oneOf'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">304</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> Listen to <span class="token constant">POST</span> to comments
cy<span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'**/comments'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'postComment'</span><span class="token punctuation">)</span>

<span class="token comment">// we have code that posts a comment when</span>
<span class="token comment">// the button is clicked in scripts.js</span>
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-post'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token string">'@postComment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request<span class="token punctuation">,</span> response <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span><span class="token string">'email'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>response <span class="token operator">&amp;&amp;</span> response<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span>
    <span class="token string">'name'</span><span class="token punctuation">,</span>
    <span class="token string">'Using POST in cy.intercept()'</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Stub a response to PUT comments/ ****</span>
cy<span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">'PUT'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">'**/comments/*'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    statusCode<span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">,</span>
    body<span class="token operator">:</span> <span class="token punctuation">{</span> error<span class="token operator">:</span> message <span class="token punctuation">}</span><span class="token punctuation">,</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">'access-control-allow-origin'</span><span class="token operator">:</span> <span class="token string">'*'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    delayMs<span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'putComment'</span><span class="token punctuation">)</span>

<span class="token comment">// we have code that puts a comment when</span>
<span class="token operator">/</span><span class="token operator">/</span> the button is clicked <span class="token keyword">in</span> scripts<span class="token punctuation">.</span>js
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-put'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token string">'@putComment'</span><span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> our <span class="token number">404</span> statusCode logic <span class="token keyword">in</span> scripts<span class="token punctuation">.</span>js executed
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-put-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">'contain'</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>

<span class="token operator">/</span><span class="token operator">/</span> we can spy on requests that <span class="token keyword">do</span> not have a response body
cy<span class="token punctuation">.</span><span class="token function">intercept</span><span class="token punctuation">(</span><span class="token string">'DELETE'</span><span class="token punctuation">,</span> <span class="token string">'/comments/1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'delete'</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'.network-delete'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token string">'@delete'</span><span class="token punctuation">)</span>
cy<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'.network-delete-comment'</span><span class="token punctuation">,</span> <span class="token string">'Comment deleted!'</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/bahmutov/cypress-examples/edit/master/docs/commands/network-requests.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/cypress-examples/6.0.1/assets/js/app.ea0a8005.js" defer></script><script src="/cypress-examples/6.0.1/assets/js/3.25f6344f.js" defer></script><script src="/cypress-examples/6.0.1/assets/js/16.5bf2cf39.js" defer></script>
  </body>
</html>
